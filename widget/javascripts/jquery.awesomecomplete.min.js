!function(e){var t=0,a="scrollIntoView"in document.createElement("li");e.fn.awesomecomplete=function(n){n=e.extend({},e.fn.awesomecomplete.defaults,n);return this.each(function(){var s=e(this),o=e.meta?e.extend({},n,s.data()):n;s.data("awesomecomplete-config",o);var l=e(o.attachTo||s);s.data("awesomecomplete-attachTo",l);var c,d=e("<ul/>").addClass(o.suggestionListClass).insertAfter(l).hide().css("width",l.outerWidth());s.data("awesomecomplete-list",d),e(window).resize(function(){d.css("width",l.outerWidth())});var m=!1;s.keyup(function(e){m?m=!1:e.which>36&&e.which<41||16==e.which||(o.typingDelay>0?(clearTimeout(c),c=setTimeout(function(){i(s)},o.typingDelay)):i(s))}),s.keydown(function(e){var t=d.children("li."+o.activeItemClass);switch(e.which){case 9:0!==t.length&&d.is(":visible")&&(s.val(t.data("awesomecomplete-value")),o.onComplete(t.data("awesomecomplete-dataItem")),d.hide(),s.parent().find(".arrow-down").hide()),d.hide(),m=!0;break;case 13:0!==t.length&&d.is(":visible")&&(e.preventDefault(),s.val(t.data("awesomecomplete-value")),o.onComplete(t.data("awesomecomplete-dataItem")),d.hide(),s.parent().find(".arrow-down").hide()),d.hide(),m=!0;break;case 38:e.preventDefault(),0===t.length?d.children("li:last-child").addClass(o.activeItemClass):(t.prev().addClass(o.activeItemClass),t.removeClass(o.activeItemClass));break;case 40:e.preventDefault(),0===t.length?d.children("li:first-child").addClass(o.activeItemClass):t.is(":not(:last-child)")&&(t.next().addClass(o.activeItemClass),t.removeClass(o.activeItemClass));break;case 27:d.hide(),m=!0}a&&d.is(":visible")&&((t=d.children("li."+o.activeItemClass)).length>0&&t.get(0).scrollIntoView(!1))}),s.keypress(function(e){d.children("li."+o.activeItemClass);13==e.which&&d.children("li."+o.activeItemClass).length>0&&e.preventDefault()});var r=!1,h=!1;e(document).bind("mousedown.awesomecomplete"+ ++t,function(){r=!0}),e(document).bind("mouseup.awesomecomplete"+t,function(){r=!1,h&&(h=!1,d.hide())}),s.blur(function(){if(r)h=!0;else{var e=d.children("li."+o.activeItemClass);d.is(":visible")&&0!==e.length&&s.val(e.data("awesomecomplete-value")),d.hide()}}),s.focus(function(){d.children(":not(."+o.noResultsClass+")").length>0&&(d.css("width",l.outerWidth()),d.show())})})};var i=function(e){var t=e.val();t.length>1&&(e.parent().find(".arrow-down").show(),"function"==typeof e.data("awesomecomplete-config").dataMethod?e.data("awesomecomplete-config").dataMethod(t,e,function(e,t){return function(a){n(e,a,t)}}(e,t)):n(e,e.data("awesomecomplete-config").staticData,t))},n=function(t,a,i){var n=t.data("awesomecomplete-list");if(n.empty().hide(),""!==i){for(var s=t.data("awesomecomplete-config"),o=[],l=0;l<a.length;l++){var c=jQuery.extend({},a[l]),d=0,m=0,r=null,h=[];for(var u in c)if("function"!=typeof c[u]&&"object"!=typeof c[u]){for(var p=!1,v=0;v<s.dontMatch.length;v++)u==s.dontMatch[v]&&(p=!0);if(!p){var f=c[u].toString(),g=[i];s.splitTerm&&(g=i.split(s.wordDelimiter));for(v=0;v<g.length;v++)if(""!==g[v]){g[v]=g[v].replace(/([\\*+?|{}()^$.#])/g,"\\$1");var w,C=new RegExp("(^| )("+g[v]+")","i");(w=f.match(C))&&(d+=w.length,u!=s.nameField&&w.length>m&&(m=w.length,r=u,h[v]=!0))}if(s.highlightMatches){C=new RegExp("("+g.join("|")+")",s.ignoreCase?"ig":"g");c[u]=f.replace(C,'<span class="'+s.highlightClass+'">$1</span>')}}}var I=0;for(v=0;v<h.length;v++)!0===h[v]&&I++;d>0?o.push({dataItem:c,originalDataItem:a[l],matchCount:d,topMatch:r,matchedTermCount:I}):"function"==typeof s.dataMethod&&o.push({dataItem:c,originalDataItem:a[l],matchCount:0,topMatch:null,matchedTermCount:0})}o.sort(function(e,t){return s.sortFunction(e,t,i)}),(o=o.slice(0,s.resultLimit)).forEach(function(a,i,l){e("<li>"+s.renderFunction(o[i].dataItem,o[i].topMatch,o[i].originalDataItem,s)+"</li>").data("awesomecomplete-dataItem",o[i].originalDataItem).data("awesomecomplete-value",s.valueFunction(o[i].originalDataItem,s)).appendTo(n).click(function(){var a=e(this);t.val(a.data("awesomecomplete-value")),s.onComplete(a.data("awesomecomplete-dataItem")),t.change()}).mouseover(function(){e(this).addClass(s.activeItemClass).siblings().removeClass(s.activeItemClass)})}),void 0!==s.noResultsMessage&&0==o.length&&n.append(e('<li class="'+s.noResultsClass+'">'+s.noResultsMessage+"</li>")),(o.length>0||void 0!==s.noResultsMessage)&&(n.css("width",t.data("awesomecomplete-attachTo").outerWidth()),n.show())}};e.fn.awesomecomplete.defaults={activeItemClass:"active",attachTo:void 0,dataMethod:void 0,dontMatch:[],highlightMatches:!0,highlightClass:"match",ignoreCase:!0,nameField:"name",noResultsClass:"noResults",noResultsMessage:void 0,onComplete:function(e){},sortFunction:function(e,t,a){return e.matchedTermCount==t.matchedTermCount?t.matchCount-e.matchCount:t.matchedTermCount-e.matchedTermCount},splitTerm:!0,staticData:[],suggestionListClass:"autocomplete",renderFunction:function(e,t,a,i){return t===i.nameField||null===t?'<p class="title">'+e[i.nameField]+"</p>":'<p class="title">'+e[i.nameField]+'</p><p class="matchRow"><span class="matchedField">'+t+"</span>: "+e[t]+"</p>"},resultLimit:10,typingDelay:0,valueFunction:function(e,t){return e[t.nameField]},wordDelimiter:/[^\da-z|ę|ó|ą|ś|ł|ż|ź|ń]+/gi}}(jQuery);